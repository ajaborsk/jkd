<?xml version = "1.0" encoding="UTF-8" standalone="yes" ?>
<application name="chuap">
  <nodes>
    <data_object name="config" persistent="true"/>
    <sql_datasource name="sql0" database="AssetPlus" username="gmao" password="gmao">
      <query name="test0">
        <column name="int_statut" value="int_status" remove=""/>
        SELECT count(nu_int) AS "Total", code_techn
          FROM en_cours
          WHERE int_cm = 'BIOMEDICAL' AND da_ap &lt; '2017-03-07'
        GROUP BY code_techn
        ORDER BY "Total";
      </query>
      <query name="test1">
        <column name="Appel" type="datetime" value="{DA_AP} + ' ' + {HE_AP}.str[0:2] + ':' + {HE_AP}.str[2:4]" remove="da_ap, he_ap"/>
        SELECT nu_int AS "Code interv", da_ap, he_ap, int_statut, int_cm, ri_suivi_techn, code_techn
        FROM en_cours
        WHERE int_cm = 'BIOMEDICAL' AND da_ap >= '2018-03-01';
      </query>
    </sql_datasource>
    <data_table_to_tabulatorjs name="tabulator_format">
      <links>
        <link input="config" node="config" port="data"/>
        <link input="input" node="sql0" port="test1"/>
      </links>
    </data_table_to_tabulatorjs>
    <html_page appname="chuap" name="homepage" template="homepage" title="Test Application Asset+ CHU Amiens-Picardie">
      <!-- <table src="/chuap/sql0/test0"/>
      <table id="ma_table" src="/chuap/sql0/test0"/>
      <table class="table_sombre" src="/chuap/sql0/test0"/>
      <table src="/chuap/sql0/test0"/>
      <chart id="c1" src="/chuap/sql0/test12"/>
      <table src="/chuap/sql0/test0"/> -->
      <table name="t1" config="/config/data/t1" data="/tabulator_format/output"/>
    </html_page>
  </nodes>
  <ports>
    <!-- Route application "index.html" port to node "homepage", port "html" -->
    <port name="index.html" node="homepage" port="html"/>
  </ports>
</application>
